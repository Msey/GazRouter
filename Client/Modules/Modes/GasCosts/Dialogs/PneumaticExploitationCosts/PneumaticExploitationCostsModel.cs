using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using GazRouter.Modes.GasCosts.Dialogs.Model;
namespace GazRouter.Modes.GasCosts.Dialogs.PneumaticExploitationCosts
{
    public class PneumaticExploitationCostsModel : Listing, ICostCalcModel
    {
        public PneumaticExploitationCostsModel()
        {
            ValveShiftings = new List<ValveShifting>();
        }
        public double Calculate()
        {
            var valveShiftingsSum = ValveShiftings.Sum(v => v.Q);

            var calc = 0.001*(valveShiftingsSum);
#region listing
            ListingCalculation = string.Join("\n", new List<string>
            {
                $"Q = 0,001 * {valveShiftingsSum} = {calc} тыс.м³",
                "",
                ValveShiftingsListing(ValveShiftings),

            });
#endregion
            return calc;
        }
        [Display(Name = "Список переключений кранов (по типам)")]
        public List<ValveShifting> ValveShiftings { get; private set; }
    }
}
