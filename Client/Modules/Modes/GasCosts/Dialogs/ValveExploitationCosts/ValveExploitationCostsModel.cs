using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using GazRouter.Modes.GasCosts.Dialogs.Model;
namespace GazRouter.Modes.GasCosts.Dialogs.ValveExploitationCosts
{
    public class ValveExploitationCostsModel : Listing, ICostCalcModel
    {
        public ValveExploitationCostsModel()
        {            
            RegulatorRuntimes = new List<RegulatorRuntime>();
        }
        public double Calculate()
        {
            var regulatorRuntimesSum = RegulatorRuntimes.Sum(r => r.Q);
            var calc = 0.001 * regulatorRuntimesSum;         
#region listing
            ListingCalculation = string.Join("\n", new List<string>
            {
                $"Q = 0,001 * {regulatorRuntimesSum} = {calc} тыс.м³",
                "",                
                RegulatorRuntimesListing(RegulatorRuntimes),
            });
#endregion
            return calc;
        }
        [Display(Name = "Список работающих регуляторов (по типам)")]
        public List<RegulatorRuntime> RegulatorRuntimes { get; private set; }
    }
}

